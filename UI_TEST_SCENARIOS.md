# 🧪 UI テストシナリオガイド

実際のUIを使ってシステムをテストするための手順書です。

## 📋 前提条件

1. ✅ Vercelにデプロイ済み: https://bess-site-survey-system.vercel.app
2. ✅ Supabaseにテストデータ投入済み（23箇所の候補地）
3. ✅ ログイン情報:
   - Email: `admin@example.com`
   - Password: `admin123`

---

## 🎯 テストシナリオ

### シナリオ1: ログインとダッシュボード確認（3分）

**目的**: 認証とダッシュボードの基本機能を確認

1. **ログイン**
   - https://bess-site-survey-system.vercel.app にアクセス
   - Email: `admin@example.com`
   - Password: `admin123`
   - 「ログイン」ボタンをクリック

2. **ダッシュボード確認**
   - ✅ 総候補地数: **23** が表示される
   - ✅ 評価済み: **17** が表示される
   - ✅ 承認済み: **9** が表示される
   - ✅ 未評価: **6** が表示される

3. **ステータス分布グラフ確認**
   - ✅ 未評価、評価済み、承認済みのバーが表示される
   - ✅ 各バーの長さが件数に比例している

4. **最近の候補地リスト確認**
   - ✅ 5件の候補地が表示される
   - ✅ 候補地名、住所、ステータスバッジが表示される

5. **クイックアクション確認**
   - ✅ 「候補地管理」ボタンをクリック → 候補地管理ページに遷移
   - ✅ ブラウザの戻るボタンでダッシュボードに戻る
   - ✅ 「スクリーニング」ボタンをクリック → スクリーニングページに遷移
   - ✅ ブラウザの戻るボタンでダッシュボードに戻る

**期待結果**: すべての数値が正しく表示され、ナビゲーションが正常に動作する

---

### シナリオ2: 候補地管理（5分）

**目的**: 候補地の一覧表示、検索、フィルタリング機能を確認

1. **候補地一覧表示**
   - 左メニュー → **候補地管理** をクリック
   - ✅ 23件の候補地が表示される
   - ✅ 各候補地に名前、住所、容量、ステータスが表示される

2. **検索機能テスト**
   - 検索ボックスに「茨城」と入力
   - ✅ 茨城県の候補地（2件）のみ表示される
   - 検索ボックスをクリア
   - ✅ 全候補地（23件）が再表示される

3. **ステータスフィルタテスト**
   - ステータスドロップダウンから「承認済み」を選択
   - ✅ 承認済みの候補地（9件）のみ表示される
   - ステータスを「すべて」に戻す
   - ✅ 全候補地が再表示される

4. **ソート機能テスト**
   - 「容量」列のヘッダーをクリック
   - ✅ 容量の大きい順（または小さい順）にソートされる
   - もう一度クリック
   - ✅ ソート順が逆転する

5. **候補地詳細表示**
   - 任意の候補地の行をクリック
   - ✅ 詳細情報が表示される（モーダルまたは詳細ページ）
   - 閉じるボタンをクリック
   - ✅ 一覧に戻る

**期待結果**: 検索、フィルタ、ソートがすべて正常に動作する

---

### シナリオ3: スクリーニング機能（7分）

**目的**: 条件による候補地の絞り込み機能を確認

#### テストケース3-1: 大規模候補地の検索

1. 左メニュー → **スクリーニング** をクリック
2. フィルタ設定:
   - 最小容量: `20` MW
   - 他の条件は空欄
3. 「検索」ボタンをクリック
4. **期待結果**: 5箇所が表示される
   - ✅ 福岡県北九州市（28.0 MW）
   - ✅ 大阪府堺市（25.0 MW）
   - ✅ 兵庫県姫路市（22.0 MW）
   - ✅ 大分県大分市（21.0 MW）
   - ✅ 茨城県日立市（20.0 MW）

#### テストケース3-2: 優良候補地の検索

1. フィルタをリセット
2. フィルタ設定:
   - ステータス: `承認済み`
   - 最小スコア: `90` 点（評価結果がある場合）
3. 「検索」ボタンをクリック
4. **期待結果**: 4箇所程度が表示される
   - ✅ 高スコアの承認済み候補地のみ

#### テストケース3-3: 関東エリアの検索

1. フィルタをリセット
2. フィルタ設定:
   - 住所に含む: `茨城` または `千葉` または `埼玉`
3. 「検索」ボタンをクリック
4. **期待結果**: 6箇所が表示される
   - ✅ 茨城県: 2箇所
   - ✅ 千葉県: 2箇所
   - ✅ 埼玉県: 2箇所

#### テストケース3-4: 複合条件検索

1. フィルタをリセット
2. フィルタ設定:
   - 最小容量: `15` MW
   - ステータス: `承認済み`
3. 「検索」ボタンをクリック
4. **期待結果**: 承認済みで15MW以上の候補地が表示される

**期待結果**: すべての検索条件が正しく動作し、結果が正確に表示される

---

### シナリオ4: ユーザー管理（3分）

**目的**: ユーザー一覧と権限管理を確認

1. **ユーザー一覧表示**
   - 左メニュー → **ユーザー管理** をクリック
   - ✅ 3名のユーザーが表示される:
     - System Administrator (admin)
     - 田中 太郎 (manager)
     - 佐藤 花子 (viewer)

2. **ユーザー情報確認**
   - ✅ 各ユーザーのメールアドレスが表示される
   - ✅ 各ユーザーの役割（role）が表示される
   - ✅ 作成日時が表示される

3. **権限の違いを確認**（後で別ユーザーでログインして確認）
   - admin: すべての機能にアクセス可能
   - manager: データ取込・編集可能
   - viewer: 閲覧のみ

**期待結果**: ユーザー一覧が正しく表示される

---

### シナリオ5: ナビゲーションテスト（3分）

**目的**: すべてのナビゲーションが正常に動作することを確認

1. **サイドバーナビゲーション**
   - ✅ ダッシュボード → ページ遷移
   - ✅ 候補地管理 → ページ遷移
   - ✅ スクリーニング → ページ遷移
   - ✅ 地図表示 → ページ遷移（プレースホルダー）
   - ✅ ユーザー管理 → ページ遷移
   - ✅ 設定 → ページ遷移（プレースホルダー）

2. **ブラウザの戻る/進むボタン**
   - ✅ 戻るボタンで前のページに戻る
   - ✅ 進むボタンで次のページに進む
   - ✅ ログイン状態が維持される

3. **ヘッダーナビゲーション**
   - ✅ ユーザー名が表示される
   - ✅ ログアウトボタンが表示される

**期待結果**: すべてのナビゲーションが正常に動作し、ログイン状態が維持される

---

### シナリオ6: ログアウトと再ログイン（2分）

**目的**: 認証フローの完全性を確認

1. **ログアウト**
   - 右上のログアウトボタンをクリック
   - ✅ ログイン画面にリダイレクトされる

2. **再ログイン**
   - Email: `admin@example.com`
   - Password: `admin123`
   - ✅ ダッシュボードに戻る
   - ✅ データが正しく表示される

**期待結果**: ログアウト・ログインが正常に動作する

---

### シナリオ7: 別ユーザーでのログイン（5分）

**目的**: 役割ベースのアクセス制御を確認

#### マネージャーユーザー

1. **ログアウト**して再ログイン
   - Email: `manager@example.com`
   - Password: `admin123`

2. **アクセス確認**
   - ✅ ダッシュボード: アクセス可能
   - ✅ 候補地管理: アクセス可能
   - ✅ スクリーニング: アクセス可能
   - ✅ データ取込: アクセス可能（表示される）
   - ✅ ユーザー管理: アクセス不可（表示されない）

#### 閲覧者ユーザー

1. **ログアウト**して再ログイン
   - Email: `viewer@example.com`
   - Password: `admin123`

2. **アクセス確認**
   - ✅ ダッシュボード: アクセス可能
   - ✅ 候補地管理: アクセス可能（閲覧のみ）
   - ✅ スクリーニング: アクセス可能
   - ✅ データ取込: アクセス不可（表示されない）
   - ✅ ユーザー管理: アクセス不可（表示されない）

**期待結果**: 各ユーザーの権限に応じて適切にアクセス制御される

---

## 📊 テスト結果チェックリスト

### 基本機能

- [ ] ログイン成功
- [ ] ダッシュボード表示
- [ ] 候補地一覧表示（23件）
- [ ] 検索機能動作
- [ ] フィルタ機能動作
- [ ] ソート機能動作

### スクリーニング

- [ ] 容量フィルタ動作
- [ ] ステータスフィルタ動作
- [ ] 住所検索動作
- [ ] 複合条件検索動作
- [ ] 検索結果が正確

### ナビゲーション

- [ ] サイドバーリンク動作
- [ ] クイックアクション動作
- [ ] ブラウザ戻る/進む動作
- [ ] ログイン状態維持

### 認証・権限

- [ ] ログアウト動作
- [ ] 再ログイン動作
- [ ] 管理者権限確認
- [ ] マネージャー権限確認
- [ ] 閲覧者権限確認

---

## 🐛 問題が見つかった場合

### 報告フォーマット

```
【問題】
- 何をしたか:
- 期待した結果:
- 実際の結果:
- エラーメッセージ（あれば）:
- ブラウザ: Chrome/Firefox/Safari/Edge
- スクリーンショット（あれば）:
```

### よくある問題と対処法

**問題1: データが表示されない**
- 原因: テストデータが投入されていない
- 対処: Supabaseでtest-data.sqlを実行

**問題2: ログインできない**
- 原因: ユーザーが作成されていない
- 対処: Supabaseでsupabase-complete-setup.sqlを実行

**問題3: ページ遷移でログアウトされる**
- 原因: 認証トークンの問題
- 対処: ブラウザのキャッシュをクリアして再ログイン

**問題4: 検索結果が0件**
- 原因: フィルタ条件が厳しすぎる
- 対処: フィルタをリセットして再検索

---

## 🎯 次のステップ

すべてのテストが完了したら:

1. ✅ 基本機能の動作確認完了
2. 🗺️ 地図表示機能の実装
3. 📊 レポート・エクスポート機能の追加
4. 📱 モバイル対応の改善
5. 🚀 本番データの投入

---

## 💡 テストのコツ

1. **ブラウザの開発者ツールを開く**（F12）
   - コンソールでエラーを確認
   - ネットワークタブでAPI呼び出しを確認

2. **異なるブラウザでテスト**
   - Chrome
   - Firefox
   - Safari
   - Edge

3. **異なる画面サイズでテスト**
   - デスクトップ（1920x1080）
   - タブレット（768x1024）
   - モバイル（375x667）

4. **実際の使用シナリオを想定**
   - 「大規模な候補地を探したい」
   - 「関東エリアの承認済み候補地を確認したい」
   - 「評価スコアの高い候補地を比較したい」

お疲れ様でした！🎉
