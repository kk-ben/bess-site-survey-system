# 🚀 テストデータ投入 - 3分クイックガイド

## ステップ1: Supabaseを開く（30秒）

1. https://supabase.com にアクセス
2. プロジェクトを選択
3. 左メニュー → **SQL Editor**

## ステップ2: SQLをコピー＆実行（1分）

1. **New query** をクリック
2. 以下のファイルを開く：
   ```
   bess-site-survey-system/database/test-data.sql
   ```
3. 全文をコピー（Ctrl+A → Ctrl+C）
4. SQL Editorに貼り付け（Ctrl+V）
5. **Run** をクリック ▶️

## ステップ3: 確認（30秒）

実行結果の最後に以下が表示されればOK：

```
table_name    | count
--------------+-------
Users         | 3
Sites         | 23
Grid Assets   | 14
Amenities     | 13
Poles         | 7
Evaluations   | 9
```

## ステップ4: アプリで確認（1分）

1. https://bess-site-survey-system.vercel.app にアクセス
2. ログイン:
   - Email: `admin@example.com`
   - Password: `admin123`
3. ダッシュボードで確認:
   - 総候補地数: **23**
   - 評価済み: **17**
   - 承認済み: **9**

---

## 🎉 完了！

これで以下のテストデータが投入されました：

✅ **23箇所の候補地**（関東8、関西6、九州9）
✅ **14箇所の変電所**（各地域の主要変電所）
✅ **13箇所の設備**（高速道路IC、港湾施設）
✅ **9件の評価結果**（承認済みサイト）

---

## 📊 データの内容

### 主要な候補地

| 候補地 | 容量 | スコア | ステータス |
|--------|------|--------|-----------|
| 福岡県北九州市 工業地帯 | 28.0 MW | 90点 | 承認済み |
| 大阪府堺市 臨海工業地帯 | 25.0 MW | 94点 | 承認済み |
| 兵庫県姫路市 工業団地 | 22.0 MW | 93点 | 承認済み |
| 大分県大分市 臨海工業地帯 | 21.0 MW | 91点 | 承認済み |
| 茨城県日立市 臨海工業地帯 | 20.0 MW | - | 評価済み |

### 地域別分布

- **関東**: 8箇所（茨城2、千葉2、埼玉2、群馬1、栃木1）
- **関西**: 6箇所（大阪2、兵庫2、和歌山1、三重1）
- **九州**: 9箇所（福岡2、佐賀1、長崎1、熊本1、大分1、鹿児島1）

---

## 🧪 テストシナリオ

### シナリオ1: 大規模候補地を検索

1. 左メニュー → **スクリーニング**
2. 最小容量: `20` MW
3. 検索 → **5箇所**が表示される

### シナリオ2: 優良候補地を検索

1. 左メニュー → **スクリーニング**
2. 最小スコア: `90` 点
3. ステータス: `承認済み`
4. 検索 → **4箇所**が表示される

### シナリオ3: 関東エリアを検索

1. 左メニュー → **候補地管理**
2. 検索ボックスに「茨城」「千葉」「埼玉」
3. **6箇所**が表示される

---

## 🔄 データをリセットしたい場合

Supabase SQL Editorで以下を実行：

```sql
-- 評価結果を削除
DELETE FROM evaluations;

-- 候補地を削除
DELETE FROM sites WHERE name LIKE '%県%';

-- 送電網資産を削除
DELETE FROM grid_assets WHERE name LIKE '%変電所%';

-- 設備を削除
DELETE FROM amenities;

-- 電柱を削除
DELETE FROM poles;

-- テストユーザーを削除（管理者以外）
DELETE FROM users WHERE email != 'admin@example.com';
```

その後、`test-data.sql` を再実行してください。

---

## 📚 詳細ドキュメント

より詳しい情報は以下を参照：

- **TEST_DATA_SETUP.md** - 詳細なセットアップガイド
- **database/README.md** - データベース構造とクエリ集
- **database/test-data.sql** - 実際のSQLファイル
- **database/test-data-sites.csv** - CSV形式データ

---

## 🆘 トラブルシューティング

### エラー: "duplicate key value"

既にデータが存在します。リセット手順を実行してから再投入してください。

### エラー: "function st_geogfromtext does not exist"

PostGIS拡張が有効化されていません：

```sql
CREATE EXTENSION IF NOT EXISTS postgis;
```

### データが表示されない

1. ログインしているか確認
2. ブラウザのコンソール（F12）でエラーを確認
3. Supabaseの認証設定を確認

---

## 🎯 次のステップ

1. ✅ テストデータ投入完了
2. 🔍 各機能の動作確認
3. 🗺️ 地図表示機能の実装
4. 📊 レポート機能の追加
5. 🚀 本番データの投入

お疲れ様でした！
