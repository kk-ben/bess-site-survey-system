# ğŸ”§ æš«å®šå¯¾å¿œ - IPã‚¢ãƒ‰ãƒ¬ã‚¹ã§ã‚¢ã‚¯ã‚»ã‚¹è¨­å®š

## ç¾åœ¨ã®çŠ¶æ³
- âœ… VPSä¸Šã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ç¨¼åƒä¸­
- âœ… å†…éƒ¨ã‚¢ã‚¯ã‚»ã‚¹æˆåŠŸï¼ˆ`localhost:3000`ï¼‰
- âŒ å¤–éƒ¨ã‚¢ã‚¯ã‚»ã‚¹ä¸å¯ï¼ˆDNSæœªè¨­å®šï¼‰

## æš«å®šå¯¾å¿œã®å†…å®¹

IPã‚¢ãƒ‰ãƒ¬ã‚¹ï¼ˆ`153.121.61.164`ï¼‰ã§ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

## ğŸš€ å®Ÿè¡Œæ‰‹é †

### ã‚¹ãƒ†ãƒƒãƒ—1: Nginxè¨­å®šï¼ˆVPSä¸Šã§å®Ÿè¡Œï¼‰

```bash
# VPSã«SSHæ¥ç¶š
ssh ubuntu@153.121.61.164

# æœ€æ–°ã‚³ãƒ¼ãƒ‰ã‚’å–å¾—
cd /home/ubuntu/bess-site-survey-system
git pull origin main

# Nginxè¨­å®šã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œ
sudo bash scripts/vps-setup-nginx-simple.sh
```

### ã‚¹ãƒ†ãƒƒãƒ—2: å‹•ä½œç¢ºèªï¼ˆVPSä¸Šï¼‰

```bash
# IPã‚¢ãƒ‰ãƒ¬ã‚¹ã§ã‚¢ã‚¯ã‚»ã‚¹ãƒ†ã‚¹ãƒˆ
curl http://153.121.61.164/api/v2
curl http://153.121.61.164/health
```

### ã‚¹ãƒ†ãƒƒãƒ—3: å¤–éƒ¨ã‚¢ã‚¯ã‚»ã‚¹ãƒ†ã‚¹ãƒˆï¼ˆãƒ­ãƒ¼ã‚«ãƒ«PCï¼‰

```powershell
# PowerShellã§å®Ÿè¡Œ
curl http://153.121.61.164/api/v2
curl http://153.121.61.164/health
```

## ğŸ“Š æœŸå¾…ã•ã‚Œã‚‹çµæœ

### /api/v2 ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
```json
{
  "message": "BESS Site Survey System API v2.0",
  "version": "2.0.0",
  "status": "running",
  "features": [...]
}
```

### /health ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
```json
{
  "status": "healthy",
  "timestamp": "2025-10-06T...",
  "services": {
    "database": "connected",
    "cache": "disconnected"
  },
  "uptime": 123.45
}
```

## ğŸ”§ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚¨ãƒ©ãƒ¼: Permission denied

```bash
# sudoãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
sudo bash scripts/vps-setup-nginx-simple.sh
```

### ã‚¨ãƒ©ãƒ¼: Nginx test failed

```bash
# Nginxè¨­å®šã‚’ç¢ºèª
sudo nginx -t

# ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç¢ºèªã—ã¦ä¿®æ­£
sudo nano /etc/nginx/sites-available/bess-api
```

### ã‚¨ãƒ©ãƒ¼: Port 80 already in use

```bash
# æ—¢å­˜ã®Nginxè¨­å®šã‚’ç¢ºèª
sudo netstat -tulpn | grep :80

# å¿…è¦ã«å¿œã˜ã¦æ—¢å­˜ã®è¨­å®šã‚’ç„¡åŠ¹åŒ–
sudo rm /etc/nginx/sites-enabled/default
sudo systemctl reload nginx
```

## ğŸ“ ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ç’°å¢ƒå¤‰æ•°

ãƒ­ãƒ¼ã‚«ãƒ«ã§æ—¢ã«æ›´æ–°æ¸ˆã¿ï¼š

```env
VITE_API_BASE_URL=http://153.121.61.164:3000/api/v2
```

Nginxè¨­å®šå¾Œã¯ä»¥ä¸‹ã«å¤‰æ›´ï¼š

```env
VITE_API_BASE_URL=http://153.121.61.164/api/v2
```

## ğŸ¯ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. âœ… ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ç’°å¢ƒå¤‰æ•°æ›´æ–°ï¼ˆå®Œäº†ï¼‰
2. ğŸ”„ Nginxè¨­å®šå®Ÿè¡Œï¼ˆVPSä¸Šã§å®Ÿè¡Œï¼‰
3. ğŸ§ª å¤–éƒ¨ã‚¢ã‚¯ã‚»ã‚¹ãƒ†ã‚¹ãƒˆ
4. ğŸš€ Vercelã«ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ‡ãƒ—ãƒ­ã‚¤

## ğŸ’¡ æ³¨æ„äº‹é …

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
- ã“ã®è¨­å®šã¯HTTPã®ã¿ã§ã™ï¼ˆHTTPSã§ã¯ã‚ã‚Šã¾ã›ã‚“ï¼‰
- æœ¬ç•ªé‹ç”¨å‰ã«SSLè¨¼æ˜æ›¸ã®è¨­å®šãŒå¿…è¦ã§ã™

### DNSè¨­å®šå¾Œ
DNSè¨­å®šãŒå®Œäº†ã—ãŸã‚‰ã€ä»¥ä¸‹ã«å¤‰æ›´ï¼š
- ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰: `https://api.ps-system.jp/api/v2`
- Nginx: `server_name api.ps-system.jp;`

---

**æ‰€è¦æ™‚é–“**: ç´„5åˆ†

ä¸Šè¨˜ã®ã‚¹ãƒ†ãƒƒãƒ—1ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚
